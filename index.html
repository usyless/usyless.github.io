<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UsyTrace</title>
    <meta content="UsyTrace" property="og:title" />
    <meta content="Online Frequency Response Tracing" property="og:description" />
    <link rel="stylesheet" href="trace.css">
</head>
<body>
<div id="sidebar">
    <div>
        <h1>UsyTrace</h1>
    </div>
    <div class="divButton sidebarSection" id="imageInputDiv">
        <input type='file' id='imageInput' class="hidden" onchange='displayImage()' accept="image/*"/>
        <label>Choose Image</label>
    </div>
    <div class="sidebarSection">
        <div>
            <button id="pth" class="disableme">Select Path</button>
        </div>
        <div>
            <button onclick="clearPath()" id="clearPath" class="disableme">Clear Path</button>
        </div>
        <div>
            <button onclick="undo()" id="undo" class="disableme">Undo Latest Trace</button>
        </div>
        <div>
            <button onclick="exportTrace()" id="export" class="disableme">Export Trace</button>
        </div>
    </div>
    <div class="sidebarSection">
        <div>
            <div>
                <label for="SPLTop">Higher SPL (dB): </label>
                <input type="number" id="SPLTop"/>
            </div>
            <div class="moveButtons">
                <button move="true" btn-name="spltop" btn-dir="down" class="disableme">▼</button>
                <button move="true" btn-name="spltop" btn-dir="up" class="disableme">▲</button>
            </div>
        </div>
        <div>
            <div>
                <label for="SPLBot">Lower SPL (dB): </label>
                <input type="number" id="SPLBot"/>
            </div>
            <div class="moveButtons">
                <button move="true" btn-name="splbot" btn-dir="down" class="disableme">▼</button>
                <button move="true" btn-name="splbot" btn-dir="up" class="disableme">▲</button>
            </div>
        </div>
        <div>
            <div>
                <label for="FRTop">Higher Frequency (Hz): </label>
                <input type="number" id="FRTop"/>
            </div>
            <div class="moveButtons">
                <button move="true" btn-name="frtop" btn-dir="up" class="disableme">◀</button>
                <button move="true" btn-name="frtop" btn-dir="down" class="disableme">▶</button>
            </div>
        </div>
        <div>
            <div>
                <label for="FRBot">Lower Frequency (Hz): </label>
                <input type="number" id="FRBot" min="0" onchange="minVal(this)"/>
            </div>
            <div class="moveButtons">
                <button move="true" btn-name="frbot" btn-dir="up" class="disableme">◀</button>
                <button move="true" btn-name="frbot" btn-dir="down" class="disableme">▶</button>
            </div>
        </div>
        <div>
            <label for="moveSpeed">Line Move Speed: </label>
            <input type="number" id="moveSpeed" min="1" value="2" onchange="updateLineMoveSpeed(); minVal(this)"/>
        </div>
    </div>
    <div class="sidebarSection">
        <div>
            <h3>Settings</h3>
        </div>
        <div>
            <label for="tolerance">Colour Tolerance: </label>
            <input type="number" id="tolerance" min="1" onchange="minVal(this)" value="50"/>
        </div>
        <div>
            <label for="maxLineHeight">Max Line Thickness Offset: </label>
            <input type="number" id="maxLineHeight" value="0"/>
        </div>
        <div>
            <label for="maxJump">Largest Contiguous Jump Offset: </label>
            <input type="number" id="maxJump" value="0"/>
        </div>
    </div>
    <div class="sidebarSection">
        <div>
            <h3>Export Settings</h3>
        </div>
        <div>
            <label for="lowFRExport">Minimum Frequency (Hz): </label>
            <input type="number" id="lowFRExport" min="1" value="20" onchange="minVal(this)"/>
        </div>
        <div>
            <label for="highFRExport">Maximum Frequency (Hz): </label>
            <input type="number" id="highFRExport" value="20000"/>
        </div>
        <div>
            <label for="exportSPLPrecision">SPL Precision: </label>
            <input type="number" id="exportSPLPrecision" value="3"/>
        </div>
        <div>
            <label for="exportFRPrecision">Frequency Precision: </label>
            <input type="number" id="exportFRPrecision" value="5"/>
        </div>
    </div>
    <div class="sidebarSection">
        <div>
            <h3>Extras</h3>
        </div>
        <div>
            <label for="lineColour">Trace Line Colour: </label>
            <input type="color" id="lineColour" onchange="updateLine()" value="#ff0000"/>
        </div>
    </div>
    <div class="divButton sidebarSection" id="restoreDefault">
        <label onclick="restoreDefault()">Restore Default Settings</label>
    </div>
    <div class="divButton sidebarSection">
        <a href="https://github.com/usyless/usyless.github.io?tab=readme-ov-file#general-use" target="_blank">Help/Repository</a>
    </div>
    <div class="sidebarSection">
        <p>Facing Bugs? First try to reload the page fully by pressing Ctrl+F5 to make sure you're not using an old cached version of the site!</p>
    </div>
    <div class="sidebarSection">
        <p>Report An Issue: Send a message to @usy_ on Discord</p>
    </div>
</div>

<div id="main-content">
    <div id="inner-content">
        <img id='uploadedImage' src='' alt='' class="removePointerEvents"/>
        <canvas id="lineCanvas" class="canvasSizing"></canvas>
        <canvas id="traceCanvas" class="canvasSizing removePointerEvents"></canvas>
        <h1 temp_thing="true">Please Choose An Image</h1>
    </div>
</div>

<script src='trace.js'></script>
</body>
</html>
