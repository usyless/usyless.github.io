<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UsyTrace</title>
    <meta content="UsyTrace" property="og:title"/>
    <meta content="Online Frequency Response Tracing" property="og:description"/>
    <link rel="stylesheet" href="trace.css">
</head>
<body>
<div id="overlay" class="hidden">
    <h1>Tracing In Progress</h1>
</div>
<div id="main">
    <div id="sidebar">
        <div>
            <h1>UsyTrace</h1>
        </div>
        <div class="divButton sidebarSection" id="imageInputDiv">
            <input type='file' id='imageInput' class="hidden" accept="image/*"/>
            <label>Choose Image</label>
        </div>
        <div class="sidebarSection">
            <div>
                <button id="selectPath" def="Select Path" alt="Stop Selecting" class="disableme">Select Path</button>
            </div>
            <div>
                <button id="selectPoint" def="Add Point" alt="Stop Adding Points" class="disableme">Add Point</button>
            </div>
            <div>
                <button onclick="clearPath()" class="disableme">Clear Path</button>
            </div>
            <div>
                <button onclick="undo()" class="disableme">Undo Latest Trace</button>
            </div>
            <div>
                <button onclick="exportTrace()" id="export" class="disableme">Export Trace</button>
            </div>
        </div>
        <div class="sidebarSection">
            <div>
                <div>
                    <label for="SPLTop">Higher SPL (dB): </label>
                    <input type="number" id="SPLTop"/>
                </div>
                <div class="moveButtons">
                    <button move="true" btn-name="spltop" dir="1" class="disableme">▼</button>
                    <button move="true" btn-name="spltop" dir="-1" class="disableme">▲</button>
                </div>
            </div>
            <div>
                <div>
                    <label for="SPLBot">Lower SPL (dB): </label>
                    <input type="number" id="SPLBot"/>
                </div>
                <div class="moveButtons">
                    <button move="true" btn-name="splbot" dir="1" class="disableme">▼</button>
                    <button move="true" btn-name="splbot" dir="-1" class="disableme">▲</button>
                </div>
            </div>
            <div>
                <div>
                    <label for="FRTop">Higher Frequency (Hz): </label>
                    <input type="number" id="FRTop"/>
                </div>
                <div class="moveButtons">
                    <button move="true" btn-name="frtop" dir="-1" class="disableme">◀</button>
                    <button move="true" btn-name="frtop" dir="1" class="disableme">▶</button>
                </div>
            </div>
            <div>
                <div>
                    <label for="FRBot">Lower Frequency (Hz): </label>
                    <input type="number" id="FRBot" min="0" onchange="minVal(this)"/>
                </div>
                <div class="moveButtons">
                    <button move="true" btn-name="frbot" dir="-1" class="disableme">◀</button>
                    <button move="true" btn-name="frbot" dir="1" class="disableme">▶</button>
                </div>
            </div>
            <div>
                <label for="moveSpeedOffset">Line Move Speed Offset: </label>
                <input type="number" id="moveSpeedOffset" onchange="updateLineMoveSpeed()"/>
            </div>
        </div>
        <div class="sidebarSection">
            <div>
                <h3>Trace Settings</h3>
            </div>
            <div>
                <label for="colourTolerance">Colour Tolerance: </label>
                <input type="number" id="colourTolerance" min="1" onchange="minVal(this)"/>
            </div>
            <div>
                <label for="maxLineHeightOffset">Max Line Thickness Offset: </label>
                <input type="number" id="maxLineHeightOffset"/>
            </div>
            <div>
                <label for="maxJumpOffset">Largest Contiguous Jump Offset: </label>
                <input type="number" id="maxJumpOffset"/>
            </div>
        </div>
        <div class="sidebarSection">
            <div>
                <h3>Export Settings</h3>
            </div>
            <div>
                <label for="PPO">Points Per Octave (PPO): </label>
                <select name="PPO" id="PPO">
                    <option value="6">6</option>
                    <option value="12">12</option>
                    <option value="24">24</option>
                    <option value="48">48</option>
                    <option value="96">96</option>
                </select>
            </div>
            <div>
                <label for="delimitation">Delimitation: </label>
                <select name="delimitation" id="delimitation">
                    <option value="tab">Tab</option>
                    <option value="space">Space</option>
                </select>
            </div>
            <div>
                <label for="lowFRExport">Minimum Frequency (Hz): </label>
                <input type="number" id="lowFRExport" min="1" onchange="minVal(this)"/>
            </div>
            <div>
                <label for="highFRExport">Maximum Frequency (Hz): </label>
                <input type="number" id="highFRExport"/>
            </div>
            <div>
                <label for="exportSPLPrecision">SPL Precision: </label>
                <input type="number" id="exportSPLPrecision"/>
            </div>
            <div>
                <label for="exportFRPrecision">Frequency Precision: </label>
                <input type="number" id="exportFRPrecision"/>
            </div>
        </div>
        <div class="divButton sidebarSection" id="restoreDefault">
            <label onclick="restoreDefault()">Restore Default Settings</label>
        </div>
        <div class="divButton sidebarSection">
            <a href="https://github.com/usyless/usyless.github.io?tab=readme-ov-file#general-use" target="_blank">Help/Repository</a>
        </div>
        <div class="sidebarSection">
            <p>Facing Bugs? First try to reload the page fully by pressing Ctrl+F5 to make sure you're not using an old
                cached version of the site!</p>
        </div>
        <div class="sidebarSection">
            <p>Report An Issue: Send a message to @usy_ on Discord</p>
        </div>
    </div>

    <div id="main-content">
        <div id="inner-content">
            <img id='uploadedImage' src='' alt='' class="removePointerEvents"/>
            <canvas id="lineCanvas" class="canvasSizing"></canvas>
            <canvas id="traceCanvas" class="canvasSizing removePointerEvents"></canvas>
            <h1 temp_thing="true">Please Choose An Image (Or drop an image on the page)</h1>
        </div>
    </div>
</div>

<script src='trace.js'></script>
</body>
</html>
